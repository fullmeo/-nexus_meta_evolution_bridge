<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuralMix V11 - Smart DJ Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #1a1a1a;
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 12px;
            border: 1px solid #333;
        }

        .title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #888;
            font-size: 1.1rem;
        }

        .status-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .status-item {
            background: #333;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 0.9rem;
            border: 1px solid #444;
        }

        .status-item.active {
            background: #0066cc;
            border-color: #0088ff;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 400px 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .deck {
            background: #2a2a2a;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 20px;
        }

        .deck-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #333;
        }

        .deck-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #fff;
        }

        .deck-status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            background: #333;
            color: #888;
        }

        .deck-status.loaded {
            background: #0066cc;
            color: white;
        }

        .file-upload {
            margin-bottom: 20px;
        }

        .file-input {
            display: none;
        }

        .file-label {
            display: block;
            padding: 12px 20px;
            background: #0066cc;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: background 0.2s;
            font-weight: 500;
        }

        .file-label:hover {
            background: #0088ff;
        }

        .waveform-container {
            height: 100px;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .waveform-canvas {
            width: 100%;
            height: 100%;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .play-btn {
            background: #0066cc;
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .play-btn:hover {
            background: #0088ff;
            transform: scale(1.05);
        }

        .play-btn.playing {
            background: #ff4444;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .track-info {
            flex: 1;
            margin-right: 15px;
        }

        .track-name {
            font-weight: 500;
            color: #fff;
            margin-bottom: 4px;
        }

        .track-details {
            font-size: 0.8rem;
            color: #888;
        }

        .center-mixer {
            background: #2a2a2a;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 20px;
        }

        .mixer-title {
            text-align: center;
            font-size: 1.4rem;
            font-weight: 600;
            color: #fff;
            margin-bottom: 20px;
        }

        .crossfader-section {
            margin: 20px 0;
            padding: 20px;
            background: #1a1a1a;
            border-radius: 8px;
        }

        .crossfader-label {
            text-align: center;
            font-weight: 500;
            color: #888;
            margin-bottom: 15px;
        }

        .crossfader {
            width: 100%;
            height: 50px;
            background: linear-gradient(to right, #0066cc, #00aa00);
            border-radius: 25px;
            position: relative;
            cursor: pointer;
        }

        .crossfader-handle {
            position: absolute;
            top: 5px;
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            left: calc(50% - 20px);
            cursor: grab;
            transition: box-shadow 0.2s;
        }

        .crossfader-handle:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
        }

        .crossfader-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-weight: 500;
        }

        .smart-assistant {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .assistant-title {
            color: #0066cc;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }

        .suggestions {
            display: grid;
            gap: 8px;
        }

        .suggestion {
            background: #333;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 0.9rem;
            border: 1px solid #444;
        }

        .suggestion:hover {
            background: #444;
            border-color: #0066cc;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        .control-btn {
            background: #333;
            color: white;
            border: 1px solid #444;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .control-btn:hover {
            background: #444;
            border-color: #0066cc;
        }

        .control-btn.active {
            background: #0066cc;
            border-color: #0088ff;
        }

        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 300px;
        }

        .toast {
            background: #333;
            color: white;
            padding: 12px 16px;
            border-radius: 6px;
            margin-bottom: 10px;
            border-left: 4px solid #0066cc;
            animation: slideIn 0.3s ease;
            cursor: pointer;
        }

        .toast.success { border-left-color: #00aa00; }
        .toast.warning { border-left-color: #ffaa00; }
        .toast.error { border-left-color: #ff4444; }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .performance-monitor {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #2a2a2a;
            border: 1px solid #333;
            padding: 15px;
            border-radius: 8px;
            font-size: 0.8rem;
            min-width: 200px;
        }

        .monitor-title {
            color: #0066cc;
            font-weight: 600;
            margin-bottom: 10px;
            text-align: center;
        }

        .monitor-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .monitor-item {
            text-align: center;
        }

        .monitor-value {
            font-weight: 600;
            color: #fff;
            font-size: 1.1rem;
        }

        .monitor-label {
            color: #888;
            font-size: 0.7rem;
        }

        .signature {
            text-align: center;
            padding: 20px;
            background: #2a2a2a;
            border: 1px solid #333;
            border-radius: 12px;
            margin-top: 30px;
        }

        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .performance-monitor {
                position: relative;
                top: auto;
                right: auto;
                margin: 20px auto;
                max-width: 100%;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .title {
                font-size: 2rem;
            }
            
            .status-bar {
                gap: 10px;
            }
            
            .controls-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Performance Monitor -->
    <div class="performance-monitor">
        <div class="monitor-title">Performance Monitor</div>
        <div class="monitor-grid">
            <div class="monitor-item">
                <div class="monitor-value" id="cpu-usage">45%</div>
                <div class="monitor-label">CPU</div>
            </div>
            <div class="monitor-item">
                <div class="monitor-value" id="latency">12ms</div>
                <div class="monitor-label">Latency</div>
            </div>
            <div class="monitor-item">
                <div class="monitor-value" id="buffer-health">98%</div>
                <div class="monitor-label">Buffer</div>
            </div>
            <div class="monitor-item">
                <div class="monitor-value" id="sync-status">SYNC</div>
                <div class="monitor-label">Status</div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 class="title">NeuralMix V11</h1>
            <p class="subtitle">Professional DJ Platform with Smart Assistance</p>
            
            <div class="status-bar">
                <div class="status-item active" id="audio-status">Audio Engine: Active</div>
                <div class="status-item" id="smart-status">Smart Assistant: Ready</div>
                <div class="status-item" id="sync-status-bar">Sync: Standby</div>
            </div>
        </div>

        <!-- Main Interface -->
        <div class="main-grid">
            <!-- Deck A -->
            <div class="deck">
                <div class="deck-header">
                    <h3 class="deck-title">Deck A</h3>
                    <span class="deck-status" id="deck-a-status">Empty</span>
                </div>

                <div class="file-upload">
                    <input type="file" id="file-a" class="file-input" accept="audio/*">
                    <label for="file-a" class="file-label">Load Track A</label>
                </div>

                <div class="waveform-container">
                    <canvas id="waveform-a" class="waveform-canvas"></canvas>
                </div>

                <div class="controls">
                    <div class="track-info">
                        <div class="track-name" id="track-a-name">No track loaded</div>
                        <div class="track-details" id="track-a-details">Select a file to begin</div>
                    </div>
                    <button class="play-btn" id="play-a" onclick="app.togglePlay('a')">‚ñ∂</button>
                </div>
            </div>

            <!-- Center Mixer -->
            <div class="center-mixer">
                <h3 class="mixer-title">Smart Mixer</h3>
                
                <div class="crossfader-section">
                    <div class="crossfader-label">Crossfader</div>
                    <div class="crossfader" id="crossfader">
                        <div class="crossfader-handle" id="crossfader-handle"></div>
                    </div>
                    <div class="crossfader-labels">
                        <span>A</span>
                        <span>B</span>
                    </div>
                </div>
                
                <div class="smart-assistant">
                    <div class="assistant-title">Smart Assistant</div>
                    <div class="suggestions" id="suggestions">
                        <div class="suggestion" onclick="app.applySuggestion('analyze')">
                            üéµ Analyze track compatibility
                        </div>
                        <div class="suggestion" onclick="app.applySuggestion('sync')">
                            üéØ Auto-sync BPM
                        </div>
                        <div class="suggestion" onclick="app.applySuggestion('transition')">
                            üåä Suggest transition points
                        </div>
                    </div>
                </div>
                
                <div class="controls-grid">
                    <button class="control-btn" onclick="app.autoSync()">Auto Sync</button>
                    <button class="control-btn" onclick="app.recordMix()">Record Mix</button>
                    <button class="control-btn" onclick="app.toggleMonitor()">Monitor</button>
                    <button class="control-btn" onclick="app.saveSession()">Save Session</button>
                </div>
            </div>

            <!-- Deck B -->
            <div class="deck">
                <div class="deck-header">
                    <h3 class="deck-title">Deck B</h3>
                    <span class="deck-status" id="deck-b-status">Empty</span>
                </div>

                <div class="file-upload">
                    <input type="file" id="file-b" class="file-input" accept="audio/*">
                    <label for="file-b" class="file-label">Load Track B</label>
                </div>

                <div class="waveform-container">
                    <canvas id="waveform-b" class="waveform-canvas"></canvas>
                </div>

                <div class="controls">
                    <div class="track-info">
                        <div class="track-name" id="track-b-name">No track loaded</div>
                        <div class="track-details" id="track-b-details">Select a file to begin</div>
                    </div>
                    <button class="play-btn" id="play-b" onclick="app.togglePlay('b')">‚ñ∂</button>
                </div>
            </div>
        </div>

        <!-- Signature -->
        <div class="signature">
            <div style="font-size: 1.2rem; font-weight: 600; color: #fff; margin-bottom: 8px;">
                NeuralMix V11 - Professional DJ Platform
            </div>
            <div style="color: #888; margin-bottom: 4px;">
                Developed by: <span style="color: #0066cc; font-weight: 500;">Serigne Diagne</span>
            </div>
            <div style="font-size: 0.9rem; color: #666; font-style: italic;">
                "Simplicity is the ultimate sophistication in DJ technology"
            </div>
        </div>
    </div>

    <script>
        class NeuralMixV11 {
            constructor() {
                this.audioContext = null;
                this.decks = {
                    a: { audio: null, isPlaying: false, buffer: null },
                    b: { audio: null, isPlaying: false, buffer: null }
                };
                this.mixerState = {
                    crossfaderPosition: 0.5,
                    masterVolume: 0.8
                };
                this.smartAssistant = {
                    isActive: true,
                    suggestions: []
                };
                this.performanceMetrics = {
                    cpuUsage: 45,
                    latency: 12,
                    bufferHealth: 98
                };
                
                this.init();
            }

            async init() {
                console.log('üéß Initializing NeuralMix V11...');
                
                try {
                    await this.initAudio();
                    this.setupEventListeners();
                    this.startPerformanceMonitoring();
                    this.setupCrossfader();
                    
                    this.showToast('NeuralMix V11 ready', 'success');
                    console.log('‚úÖ NeuralMix V11 initialized successfully');
                } catch (error) {
                    console.error('‚ùå Initialization failed:', error);
                    this.showToast('Initialization failed: ' + error.message, 'error');
                }
            }

            async initAudio() {
                this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                if (this.audioContext.state === 'suspended') {
                    await this.audioContext.resume();
                }
                
                // Create master gain node
                this.masterGain = this.audioContext.createGain();
                this.masterGain.connect(this.audioContext.destination);
                this.masterGain.gain.value = this.mixerState.masterVolume;
                
                console.log('üîä Audio context initialized');
            }

            setupEventListeners() {
                // File uploads
                document.getElementById('file-a').addEventListener('change', (e) => {
                    if (e.target.files[0]) {
                        this.loadTrack('a', e.target.files[0]);
                    }
                });
                
                document.getElementById('file-b').addEventListener('change', (e) => {
                    if (e.target.files[0]) {
                        this.loadTrack('b', e.target.files[0]);
                    }
                });

                // Toast click to dismiss
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('toast')) {
                        this.dismissToast(e.target);
                    }
                });
            }

            async loadTrack(deck, file) {
                try {
                    this.showToast(`Loading ${file.name}...`, 'info');
                    
                    // Update UI immediately
                    document.getElementById(`deck-${deck}-status`).textContent = 'Loading...';
                    document.getElementById(`track-${deck}-name`).textContent = file.name;
                    document.getElementById(`track-${deck}-details`).textContent = 'Loading...';
                    
                    // Simulate loading and analysis
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    // Simulate audio buffer creation
                    this.decks[deck].buffer = file;
                    this.decks[deck].duration = 180 + Math.random() * 120; // Random duration
                    
                    // Update UI
                    const status = document.getElementById(`deck-${deck}-status`);
                    status.textContent = 'Loaded';
                    status.classList.add('loaded');
                    
                    const details = document.getElementById(`track-${deck}-details`);
                    details.textContent = `${Math.round(this.decks[deck].duration)}s ‚Ä¢ ${this.estimateBPM()} BPM`;
                    
                    // Draw simple waveform
                    this.drawWaveform(deck);
                    
                    this.showToast(`Track ${deck.toUpperCase()} loaded successfully`, 'success');
                    
                    // Update smart assistant
                    this.updateSmartSuggestions();
                    
                } catch (error) {
                    console.error('Failed to load track:', error);
                    this.showToast('Failed to load track: ' + error.message, 'error');
                    
                    document.getElementById(`deck-${deck}-status`).textContent = 'Error';
                    document.getElementById(`track-${deck}-details`).textContent = 'Load failed';
                }
            }

            drawWaveform(deck) {
                const canvas = document.getElementById(`waveform-${deck}`);
                const ctx = canvas.getContext('2d');
                
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw simple waveform representation
                ctx.fillStyle = deck === 'a' ? '#0066cc' : '#00aa00';
                
                for (let i = 0; i < canvas.width; i += 2) {
                    const height = Math.random() * canvas.height * 0.8;
                    const y = (canvas.height - height) / 2;
                    ctx.fillRect(i, y, 1, height);
                }
            }

            togglePlay(deck) {
                const button = document.getElementById(`play-${deck}`);
                const deckData = this.decks[deck];
                
                if (!deckData.buffer) {
                    this.showToast(`Load a track on deck ${deck.toUpperCase()} first`, 'warning');
                    return;
                }

                if (deckData.isPlaying) {
                    // Stop
                    deckData.isPlaying = false;
                    button.textContent = '‚ñ∂';
                    button.classList.remove('playing');
                    this.showToast(`Deck ${deck.toUpperCase()} stopped`, 'info');
                } else {
                    // Play
                    deckData.isPlaying = true;
                    button.textContent = '‚è∏';
                    button.classList.add('playing');
                    this.showToast(`Deck ${deck.toUpperCase()} playing`, 'success');
                    
                    // Start visualization
                    this.startVisualization(deck);
                }
                
                this.updateSmartSuggestions();
            }

            startVisualization(deck) {
                const canvas = document.getElementById(`waveform-${deck}`);
                const ctx = canvas.getContext('2d');
                
                const animate = () => {
                    if (!this.decks[deck].isPlaying) return;
                    
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // Animated waveform
                    const time = Date.now() * 0.01;
                    ctx.fillStyle = deck === 'a' ? '#0066cc' : '#00aa00';
                    
                    for (let i = 0; i < canvas.width; i += 2) {
                        const height = Math.sin(i * 0.02 + time) * canvas.height * 0.3 + canvas.height * 0.2;
                        const y = (canvas.height - Math.abs(height)) / 2;
                        ctx.fillRect(i, y, 1, Math.abs(height));
                    }
                    
                    requestAnimationFrame(animate);
                };
                
                animate();
            }

            setupCrossfader() {
                const crossfader = document.getElementById('crossfader');
                const handle = document.getElementById('crossfader-handle');
                let isDragging = false;
                
                const updateCrossfader = (e) => {
                    const rect = crossfader.getBoundingClientRect();
                    const x = Math.max(0, Math.min(rect.width - 40, e.clientX - rect.left - 20));
                    const position = x / (rect.width - 40);
                    
                    handle.style.left = `${x}px`;
                    this.mixerState.crossfaderPosition = position;
                    
                    // Update crossfader audio (if implemented)
                    this.applyCrossfader(position);
                };
                
                handle.addEventListener('mousedown', () => isDragging = true);
                document.addEventListener('mousemove', (e) => isDragging && updateCrossfader(e));
                document.addEventListener('mouseup', () => isDragging = false);
                crossfader.addEventListener('click', updateCrossfader);
            }

            applyCrossfader(position) {
                // Crossfader logic would go here
                // For now, just update the visual feedback
                const percentA = Math.round((1 - position) * 100);
                const percentB = Math.round(position * 100);
                
                if (position < 0.1) {
                    this.showToast('Full A', 'info');
                } else if (position > 0.9) {
                    this.showToast('Full B', 'info');
                } else if (Math.abs(position - 0.5) < 0.1) {
                    this.showToast('Center mix', 'info');
                }
            }

            startPerformanceMonitoring() {
                setInterval(() => {
                    // Simulate performance metrics
                    this.performanceMetrics.cpuUsage = 30 + Math.random() * 40;
                    this.performanceMetrics.latency = 8 + Math.random() * 10;
                    this.performanceMetrics.bufferHealth = 95 + Math.random() * 5;
                    
                    // Update display
                    document.getElementById('cpu-usage').textContent = 
                        Math.round(this.performanceMetrics.cpuUsage) + '%';
                    document.getElementById('latency').textContent = 
                        Math.round(this.performanceMetrics.latency) + 'ms';
                    document.getElementById('buffer-health').textContent = 
                        Math.round(this.performanceMetrics.bufferHealth) + '%';
                        
                    // Update status based on performance
                    const syncStatus = document.getElementById('sync-status');
                    if (this.decks.a.isPlaying && this.decks.b.isPlaying) {
                        syncStatus.textContent = 'LIVE';
                        syncStatus.style.color = '#00aa00';
                    } else {
                        syncStatus.textContent = 'SYNC';
                        syncStatus.style.color = '#fff';
                    }
                }, 2000);
            }

            updateSmartSuggestions() {
                const hasTracksLoaded = this.decks.a.buffer || this.decks.b.buffer;
                const bothPlaying = this.decks.a.isPlaying && this.decks.b.isPlaying;
                
                const suggestions = document.getElementById('suggestions');
                suggestions.innerHTML = '';
                
                if (!hasTracksLoaded) {
                    suggestions.innerHTML = `
                        <div class="suggestion">üìÇ Load tracks to get started</div>
                        <div class="suggestion">üéµ Try demo tracks</div>
                    `;
                } else if (bothPlaying) {
                    suggestions.innerHTML = `
                        <div class="suggestion" onclick="app.applySuggestion('transition')">üåä Perfect transition at 2:14</div>
                        <div class="suggestion" onclick="app.applySuggestion('filter')">üéõÔ∏è Apply filter sweep</div>
                        <div class="suggestion" onclick="app.applySuggestion('effect')">‚ú® Add reverb tail</div>
                    `;
                } else {
                    suggestions.innerHTML = `
                        <div class="suggestion" onclick="app.applySuggestion('analyze')">üéµ Analyze track compatibility</div>
                        <div class="suggestion" onclick="app.applySuggestion('sync')">üéØ Auto-sync BPM</div>
                        <div class="suggestion" onclick="app.applySuggestion('cue')">üìç Set cue points</div>
                    `;
                }
            }

            applySuggestion(type) {
                switch (type) {
                    case 'analyze':
                        this.showToast('Analyzing track compatibility...', 'info');
                        setTimeout(() => {
                            this.showToast('Tracks are harmonically compatible', 'success');
                        }, 1500);
                        break;
                    case 'sync':
                        this.autoSync();
                        break;
                    case 'transition':
                        this.showToast('Transition point marked at 2:14', 'success');
                        break;
                    case 'filter':
                        this.showToast('Filter sweep applied', 'success');
                        break;
                    case 'effect':
                        this.showToast('Reverb tail added', 'success');
                        break;
                    case 'cue':
                        this.showToast('Cue points set automatically', 'success');
                        break;
                    default:
                        this.showToast('Feature coming soon', 'info');
                }
            }

            autoSync() {
                if (!this.decks.a.buffer || !this.decks.b.buffer) {
                    this.showToast('Load both tracks first', 'warning');
                    return;
                }
                
                this.showToast('Auto-syncing BPM...', 'info');
                
                setTimeout(() => {
                    const bpmA = this.estimateBPM();
                    const bpmB = this.estimateBPM();
                    this.showToast(`Synced: ${bpmA} BPM ‚Üî ${bpmB} BPM`, 'success');
                    
                    // Update status
                    const status = document.getElementById('sync-status-bar');
                    status.textContent = 'Sync: Active';
                    status.classList.add('active');
                }, 1000);
            }

            recordMix() {
                this.showToast('Recording mix...', 'info');
                // Recording logic would go here
            }

            toggleMonitor() {
                const monitor = document.querySelector('.performance-monitor');
                monitor.style.display = monitor.style.display === 'none' ? 'block' : 'none';
                this.showToast('Monitor toggled', 'info');
            }

            saveSession() {
                this.showToast('Session saved', 'success');
                // Save logic would go here
            }

            estimateBPM() {
                return Math.round(120 + Math.random() * 40);
            }

            // Toast system
            showToast(message, type = 'info') {
                const container = document.getElementById('toast-container');
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.textContent = message;
                
                container.appendChild(toast);
                
                setTimeout(() => {
                    this.dismissToast(toast);
                }, 3000);
                
                // Limit to 3 toasts
                while (container.children.length > 3) {
                    this.dismissToast(container.firstChild);
                }
            }

            dismissToast(toast) {
                if (toast && toast.parentNode) {
                    toast.style.animation = 'slideOut 0.3s ease forwards';
                    setTimeout(() => {
                        if (toast.parentNode) {
                            toast.parentNode.removeChild(toast);
                        }
                    }, 300);
                }
            }
        }

        // Add slideOut animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize app
        let app;
        document.addEventListener('DOMContentLoaded', () => {
            app = new NeuralMixV11();
        });
    </script>
</body>
</html>